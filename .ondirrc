# vi:syntax=sh

enter ~/projects/personal
    export GIT_AUTHOR_NAME=
    export GIT_AUTHOR_EMAIL=
    export GIT_COMMITTER_NAME="$GIT_AUTHOR_NAME"
    export GIT_COMMITTER_EMAIL="$GIT_AUTHOR_EMAIL"

leave ~/projects/personal
    unset GIT_AUTHOR_NAME
    unset GIT_AUTHOR_EMAIL

enter ~/projects/work
    export GIT_AUTHOR_NAME=
    export GIT_AUTHOR_EMAIL=
    export GIT_COMMITTER_NAME="$GIT_AUTHOR_NAME"
    export GIT_COMMITTER_EMAIL="$GIT_AUTHOR_EMAIL"

leave ~/projects/work
    unset GIT_AUTHOR_NAME
    unset GIT_AUTHOR_EMAIL
    unset GIT_COMMITTER_NAME
    unset GIT_COMMITTER_EMAIL

enter ~/projects/(work|personal)/([^/]+)
    if [ -e .venv ]; then
        env=`cat .venv`
        if [ "$env" != "${VIRTUAL_ENV##*/}" ]; then
            workon $env
        fi
    fi

leave ~/projects/(work|personal)/([^/]+)
    deactivate > /dev/null 2>&1
